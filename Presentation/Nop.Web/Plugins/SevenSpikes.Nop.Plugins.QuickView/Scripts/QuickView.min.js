$(document).ready(function () { function a() { $(document).on({ mouseenter: function () { b(this, f) }, mouseleave: function () { c(this) } }, d) } function b(a, b) { var c = GetQuickViewButtonText(), c = '<div class="' + g + '"><a>' + c + "</a></div>", d = $(a).parents(".quickViewWindow"); if (!(void 0 != d && 0 < d.length)) { $(a).css("position", "relative"); !1 === b ? $(a).prepend(c) : $(a).find(b).prepend(c); if (c = $(a).find(".picture a")) c = c[0].href, $(a).find(".picture").before('<a class="buttonOverlay" href="' + c + '"></a>'); $(e).hide().delay(200).fadeIn(100); $(".buttonOverlay").hide().fadeIn(300); $(e).click(function () { var c = $(a); void 0 != c && RetrieveQuickViewData(c) }) } } function c(a) { $(e).fadeOut(100); $("a.buttonOverlay").fadeOut(100); setTimeout(function () { $(a).find(e).remove(); $(a).find("a.buttonOverlay").remove() }, 100) } var g = "quick-view-button", e = "." + g, d = GetProductSelector(); if ("" != d) { var f = GetQuickViewButtonParent(d); if ("undefined" == typeof f || null == f) f = !1; $.getSpikesViewPort(); $.isMobile() || !$.isMobile() && 768 >= $.getSpikesViewPort().width ? (c(), $(document).off("mouseenter", d).off("mouseleave", d)) : (c(), a()); $(document).on("nopAjaxCartProductAddedToCartEvent", function () { closeQuickViewWindow() }); AddQuickViewWindowDialog() } }); function closeQuickViewWindow() { var a = $(".quickViewWindow").data("kendoWindow"); void 0 != a && "" != a.content() && a.close() } function AddQuickViewWindowDialog() { var a = $("body"); if (0 < a.length) { a.prepend('<div class="quickViewWindow"></div>'); var a = GetIsQuickViewPopupDraggable(), b = GetIsQuickViewPopupOverlayEnabled(); $(".quickViewWindow").kendoWindow({ minHeight: "330px", minWidth: "660px", draggable: a, resizable: !1, modal: b, actions: ["Close"], animation: !1, visible: !1, close: function () { $(".quickViewWindow").html($("").html()) } }).data("kendoWindow").wrapper.addClass("quickView") } } function ShowQuickViewWindow() { var a = $(".quickViewWindow").data("kendoWindow"), b = $("<div class='k-loading-mask'><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("700px").height("360px"); a.content(b); a.center(); a.open() } function ShowQuickView(a) { $(".quickViewWindow").data("kendoWindow").content(a) } function RetrieveQuickViewData(a) { a = GetProductId(a); if (0 != a) { var b = GetRetrieveQuickViewDataUrl(); "" != b && $.ajax({ beforeSend: function () { ShowQuickViewWindow() }, cache: !1, type: "POST", data: $.toJSON({ productID: a }), contentType: "application/json; charset=utf-8", url: b, success: function (a) { ShowQuickView(a); a = $(".quickViewData").attr("data-accordionpanelsheightstyle"); $("#accordion").accordion({ collapsible: !0, icons: { header: "ui-icon-circle-arrow-e", activeHeader: "ui-icon-circle-arrow-s" }, heightStyle: a }); $.event.trigger({ type: "nopQuickViewDataShownEvent" }); a = $(".quickView").offset(); var b = $(".quickView").height(); $(window).height() < b ? $(".quickView").css("top", $(document).scrollTop() + 10) : $(".quickView").css("top", a.top - b / 4) }, error: function (a, b, e) { alert("Loading the page failed."); closeQuickViewWindow() } }) } } function GetProductSelector() { var a = $(".quickViewData").attr("data-productselector"); return void 0 != a ? a : "" } function GetQuickViewButtonParent(a) { var b = $(".quickViewData").attr("data-productselectorchild"); return "undefined" != typeof b && b != a && 0 < $(a + " " + b).length ? b : !1 } function GetProductId(a) { a = $(a).attr("data-productid"); return void 0 != a ? a : 0 } function GetRetrieveQuickViewDataUrl() { var a = $(".quickViewData").attr("data-retrieveQuickViewUrl"); return void 0 != a ? a : "" } function GetQuickViewButtonText() { var a = $(".quickViewData").attr("data-quickViewButtonText"); return void 0 != a ? a : "" } function GetIsQuickViewPopupDraggable() { var a = $(".quickViewData").attr("data-isQuickViewPopupDraggable"); return void 0 != a && "True" == a ? !0 : !1 } function GetIsQuickViewPopupOverlayEnabled() { var a = $(".quickViewData").attr("data-enableQuickViewPopupOverlay"); return void 0 != a && "True" == a ? !0 : !1 };