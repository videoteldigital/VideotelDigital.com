(function (a) { a.fn.jDropDown = function (c) { function d(a) { a.addClass("selected"); a.siblings().removeClass("selected") } c = a.extend({ selected: 0, callback: "" }, c); return this.each(function () { var b = this; a(this).addClass("jDropDown"); this.ul = a(this).find("ul"); this.li_list = this.ul.find("li"); this.div = a(this).find("div"); this.par = a(this).find("p"); this.selectedLiElement = null; "reset" == c.method ? (this.selectedLiElement = this.ul.find("li:eq(0)"), this.par.text(this.selectedLiElement.text())) : (this.selectedLiElement = this.ul.find("li:eq(" + c.selected + ")"), this.par.text(this.selectedLiElement.text()), this.close = function () { b.ul.hide() }, this.div.off("click.jDropDown").on("click.jDropDown", function (a) { a.stopPropagation(); b.ul.is(":visible") ? b.close() : (d(b.selectedLiElement), b.ul.show()) }), this.li_list.off("click.jDropDown").on("click.jDropDown", function () { var d = a(this).index(), e = a(this).text(); b.selectedLiElement = a(this); b.par.text(e); b.close(); a.isFunction(c.callback) && c.callback(d, e) }), this.li_list.off("mouseover.jDropDown").on("mouseover.jDropDown", function () { d(a(this)) }), a(document).click(function () { b.close() })) }) } })(jQuery);