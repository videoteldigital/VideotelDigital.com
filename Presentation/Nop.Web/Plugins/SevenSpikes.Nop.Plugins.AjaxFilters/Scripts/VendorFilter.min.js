/*
* Copyright 2014 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

$(document).ready(function () { $(".vendorFilterPanel7Spikes .filtersGroupPanel a[data-option-id]").each(function () { var a = new VendorFiltersManager; $(this).click(a.filterProductsByVendorAttributeOption) }) }); function VendorFiltersManager() { } VendorFiltersManager.prototype.filterProductsByVendorAttributeOption = FilterProductsByVendorAttributeOption; VendorFiltersManager.prototype.buildVendorFiltersModel = BuildVendorFiltersModel; VendorFiltersManager.prototype.refreshVendorFilters = RefreshVendorFilters; FiltersManager.prototype.buildVendorFiltersModel = (new VendorFiltersManager).buildVendorFiltersModel; FiltersManager.prototype.refreshVendorFilters = (new VendorFiltersManager).refreshVendorFilters; function BuildVendorFiltersModel(a, b) { var c = $(".vendorFilterPanel7Spikes .filtersGroupPanel"), d = {}; d.CategoryId = a; d.VendorFilterItems = []; void 0 != b && b.get(0) == c.get(0) && (d.Priority = 1); c.find("a[data-option-id]").each(function (b, a) { var c = $(a).attr("data-option-id"), e = $(a).attr("class"), g = {}; g.Id = c; g.FilterItemState = (new FiltersManager).getFilterItemStateBasedOnItemClass(e, g.FilterItemState); d.VendorFilterItems.push(g) }); return d } function RefreshVendorFilters(a, b) { var c = $(".vendorFilterPanel7Spikes .filtersGroupPanel"); if (b && "usedropdowns" == b) var d = !0; c.find("a[data-option-id]").each(function (c, f) { var h = $(f).attr("data-option-id"), e = $.grep(a.VendorFilterItems, function (a) { return a.Id == h }); 0 != e.length && (e = e[0], b && 1 == e.FilterItemState && "usedropdowns" == b && (d = !1, SetDropDownSelectedElementForVendorFilters(f)), $(f).attr("class", (new FiltersManager).getFilterItemClassBasedOnState(e.FilterItemState, $(f).attr("class")))) }); b && "usedropdowns" == b && !0 == d && (c = c.find(".allFilterDropDownOptions")[0], SetDropDownSelectedElementForVendorFilters(c)) } function SetDropDownSelectedElementForVendorFilters(a) { var b = $("#vendorFiltersDropDown"), c = $(a).parent(), d = b.get(0); c.siblings().removeClass("selected"); c.addClass("selected"); d.selectedLiElement = c; b.find("p").text($(a).text()) } function FilterProductsByVendorAttributeOption(a) { a = $(a.currentTarget); var b = a.parents(".filtersGroupPanel"); (new FiltersManager).requestProductsForSelectedFilters(b, a) };