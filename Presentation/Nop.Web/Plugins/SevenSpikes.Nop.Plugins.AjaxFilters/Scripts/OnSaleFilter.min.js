$(document).ready(function () { $(".onSaleFilterPanel7Spikes .filtersGroupPanel a[data-option-id]").each(function () { var a = new OnSaleFiltersManager; $(this).click(a.filterProductsByOnSaleOption) }) }); function OnSaleFiltersManager() { } OnSaleFiltersManager.prototype.filterProductsByOnSaleOption = FilterProductsByOnSaleOption; OnSaleFiltersManager.prototype.buildOnSaleFiltersModel = BuildOnSaleFiltersModel; OnSaleFiltersManager.prototype.refreshOnSaleFilters = RefreshOnSaleFilters; FiltersManager.prototype.buildOnSaleFiltersModel = (new OnSaleFiltersManager).buildOnSaleFiltersModel; FiltersManager.prototype.refreshOnSaleFilters = (new OnSaleFiltersManager).refreshOnSaleFilters; function BuildOnSaleFiltersModel(a, b, c, e) { var f = $(".onSaleFilterPanel7Spikes .filtersGroupPanel"), d = {}; d.CategoryId = a; d.ManufacturerId = b; d.VendorId = c; void 0 != e && e.get(0) == f.get(0) && (d.Priority = 1); f.find("a[data-option-id]").each(function (a, b) { var c = $(b).attr("data-option-id"), e = $(b).attr("class"); d.Id = c; d.FilterItemState = (new FiltersManager).getFilterItemStateBasedOnItemClass(e, d.FilterItemState) }); return d } function RefreshOnSaleFilters(a, b) { var c = $(".onSaleFilterPanel7Spikes .filtersGroupPanel"); if (b && "usedropdowns" == b) var e = !0; c.find("a[data-option-id]").each(function (c, d) { var g = $(d).attr("data-option-id"); a.Id == g && (b && 1 == a.FilterItemState && "usedropdowns" == b && (e = !1, SetDropDownSelectedElementForOnSaleFilters(d)), $(d).attr("class", (new FiltersManager).getFilterItemClassBasedOnState(a.FilterItemState, $(d).attr("class")))) }); b && "usedropdowns" == b && !0 == e && (c = c.find(".allFilterDropDownOptions")[0], SetDropDownSelectedElementForOnSaleFilters(c)) } function SetDropDownSelectedElementForOnSaleFilters(a) { var b = $("#onSaleFiltersDropDown"), c = $(a).parent(), e = b.get(0); c.siblings().removeClass("selected"); c.addClass("selected"); e.selectedLiElement = c; b.find("p").text($(a).text()) } function FilterProductsByOnSaleOption(a) { a = $(a.currentTarget); var b = a.parents(".filtersGroupPanel"); (new FiltersManager).requestProductsForSelectedFilters(b, a) };