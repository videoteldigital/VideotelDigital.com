/*
* Copyright 2014 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

$(document).ready(function () { $(".manufacturerFilterPanel7Spikes .filtersGroupPanel a[data-option-id]").each(function () { var a = new ManufacturerFiltersManager; $(this).click(a.filterProductsByManufacturerAttributeOption) }) }); function ManufacturerFiltersManager() { } ManufacturerFiltersManager.prototype.filterProductsByManufacturerAttributeOption = FilterProductsByManufacturerAttributeOption; ManufacturerFiltersManager.prototype.buildManufacturerFiltersModel = BuildManufacturerFiltersModel; ManufacturerFiltersManager.prototype.refreshManufacturerFilters = RefreshManufacturerFilters; FiltersManager.prototype.buildManufacturerFiltersModel = (new ManufacturerFiltersManager).buildManufacturerFiltersModel; FiltersManager.prototype.refreshManufacturerFilters = (new ManufacturerFiltersManager).refreshManufacturerFilters; function BuildManufacturerFiltersModel(a, b) { var c = $(".manufacturerFilterPanel7Spikes .filtersGroupPanel"), d = {}; d.CategoryId = a; d.ManufacturerFilterItems = []; void 0 != b && b.get(0) == c.get(0) && (d.Priority = 1); c.find("a[data-option-id]").each(function (b, a) { var c = $(a).attr("data-option-id"), e = $(a).attr("class"), g = {}; g.Id = c; g.FilterItemState = (new FiltersManager).getFilterItemStateBasedOnItemClass(e, g.FilterItemState); d.ManufacturerFilterItems.push(g) }); return d } function RefreshManufacturerFilters(a, b) { var c = $(".manufacturerFilterPanel7Spikes .filtersGroupPanel"); if (b && "usedropdowns" == b) var d = !0; c.find("a[data-option-id]").each(function (c, f) { var h = $(f).attr("data-option-id"), e = $.grep(a.ManufacturerFilterItems, function (a) { return a.Id == h }); 0 != e.length && (e = e[0], b && (1 == e.FilterItemState && "usedropdowns" == b) && (d = !1, SetDropDownSelectedElementForManufacturerFilters(f)), $(f).attr("class", (new FiltersManager).getFilterItemClassBasedOnState(e.FilterItemState, $(f).attr("class")))) }); b && ("usedropdowns" == b && !0 == d) && (c = c.find(".allFilterDropDownOptions")[0], SetDropDownSelectedElementForManufacturerFilters(c)) } function SetDropDownSelectedElementForManufacturerFilters(a) { var b = $("#manufacturerFiltersDropDown"), c = $(a).parent(), d = b.get(0); c.siblings().removeClass("selected"); c.addClass("selected"); d.selectedLiElement = c; b.find("p").text($(a).text()) } function FilterProductsByManufacturerAttributeOption(a) { var a = $(a.currentTarget), b = a.parents(".filtersGroupPanel"); (new FiltersManager).requestProductsForSelectedFilters(b, a) };