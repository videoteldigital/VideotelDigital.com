/*
* Copyright 2014 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/

$(document).ready(function () { $(".specificationFilterPanel7Spikes .filtersGroupPanel a[data-option-id]").each(function () { var a = new SpecificationFiltersManager; $(this).click(a.filterProductsBySpecificationAttributeOption) }) }); function SpecificationFiltersManager() { } SpecificationFiltersManager.prototype.filterProductsBySpecificationAttributeOption = FilterProductsBySpecificationAttributeOption; SpecificationFiltersManager.prototype.buildSpecificationFiltersModel = BuildSpecificationFiltersModel; SpecificationFiltersManager.prototype.refreshSpecificationFilters = RefreshSpecificationFilters; FiltersManager.prototype.buildSpecificationFiltersModel = (new SpecificationFiltersManager).buildSpecificationFiltersModel; FiltersManager.prototype.refreshSpecificationFilters = (new SpecificationFiltersManager).refreshSpecificationFilters; function BuildSpecificationFiltersModel(a, b, c, e) { var d = {}; d.CategoryId = a; d.ManufacturerId = b; d.VendorId = c; d.SpecificationFilterGroups = []; $(".specificationFilterPanel7Spikes .filtersGroupPanel").each(function (b, a) { var c = $(a).attr("data-optionsGroupId"), f = {}; f.Id = c; void 0 != e && e.get(0) == a && (f.IsMain = !0, d.Priority = 1); f.FilterItems = []; $(a).find("a[data-option-id]").each(function (a, b) { var d = $(b).attr("data-option-id"), e = $(b).attr("class"), c = {}; c.Id = d; c.FilterItemState = (new FiltersManager).getFilterItemStateBasedOnItemClass(e, c.FilterItemState); f.FilterItems.push(c) }); d.SpecificationFilterGroups.push(f) }); return d } function RefreshSpecificationFilters(a, b) { $(".specificationFilterPanel7Spikes .filtersGroupPanel").each(function (c, e) { var d = $(e).attr("data-optionsGroupId"), h = $.grep(a.SpecificationFilterGroups, function (a) { return a.Id == d }); if (0 != h.length) { var l = h[0]; if (b && "usedropdowns" == b) var k = !0; $(e).find("a[data-option-id]").each(function (a, c) { var e = $(c).attr("data-option-id"), g = $.grep(l.FilterItems, function (a) { return a.Id == e }); 0 != g.length && (g = g[0], b && "usedropdowns" == b && 1 == g.FilterItemState && (k = !1, SetDropDownSelectedElementForSprcificationFilters(d, c)), $(c).attr("class", (new FiltersManager).getFilterItemClassBasedOnState(g.FilterItemState, $(c).attr("class")))) }); b && "usedropdowns" == b && !0 == k && (h = $(e).find(".allFilterDropDownOptions")[0], SetDropDownSelectedElementForSprcificationFilters(d, h)) } }) } function SetDropDownSelectedElementForSprcificationFilters(a, b) { var c = $("#specificationFiltersDropDown" + a), e = $(b).parent(), d = c.get(0); e.siblings().removeClass("selected"); e.addClass("selected"); d.selectedLiElement = e; c.find("p").text($(b).text()) } function FilterProductsBySpecificationAttributeOption(a) { a = $(a.currentTarget); var b = a.parents("div[data-optionsGroupId]"); (new FiltersManager).requestProductsForSelectedFilters(b, a) };